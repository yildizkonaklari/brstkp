services:
  # Python Backend
  - type: web
    name: borsatakip-api
    runtime: docker
    repo: https://github.com/yildizkonaklari/brstkp
    rootDir: .
    dockerfilePath: apps/api/Dockerfile
    plan: free
    envVars:
      - key: DATABASE_URL
        fromDatabase:
          name: borsatakip-db
          property: connectionString

      - key: PORT
        value: 8000
    healthCheckPath: /healthz
    autoDeploy: true

  # Redis (Optional: Render Free Tier doesn't support Redis, might need to omit or use external)
  # For MVP on Free Tier, we might need a workaround or skip Redis validation in code if not critical.
  # However, let's define it. If user pays or finds free redis, good. 
  # Actually, Render doesn't have a free Redis. We might mock it or use internal memory if possible for MVP?
  # Or just comment it out and warn user.
  # Let's assume for now the user might use a managed redis or just fail strictly.
  # Better for MVP: Use a simple in-memory cache if REDIS_URL is missing?
  # The code expects REDIS_URL.
  # Let's keep it simple for now and let the user know.

databases:
  - name: borsatakip-db
    databaseName: borsatakip
    user: borsatakip_user
    plan: free
